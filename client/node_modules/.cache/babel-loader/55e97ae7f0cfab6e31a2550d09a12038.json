{"ast":null,"code":"import _classCallCheck from\"/Users/iden/Desktop/Projects/carillon_codestates/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/iden/Desktop/Projects/carillon_codestates/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/iden/Desktop/Projects/carillon_codestates/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/iden/Desktop/Projects/carillon_codestates/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/iden/Desktop/Projects/carillon_codestates/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import SearchBar from'./SearchBar';import{connect}from'react-redux';import*as _searchlist from'../modules/searchlist';import Pagination from'./Pagination';// import Pagination2 from './2Pagination2';\nimport axios from'axios';import{withRouter}from'react-router-dom';import*as _lawinfo from'../modules/lawinfo';import'./SearchResult.css';import{format}from'date-fns';var SearchResult=/*#__PURE__*/function(_React$Component){_inherits(SearchResult,_React$Component);var _super=_createSuper(SearchResult);function SearchResult(props){var _this;_classCallCheck(this,SearchResult);_this=_super.call(this,props);_this.handleClickSearch=function(name,lawNum,enfDate){var lawinfo=_this.props.lawinfo;var payload={lawNum:lawNum,enfDate:enfDate};axios.post(\"http://13.125.112.243/law/\".concat(encodeURIComponent(name),\"?lawNum=\").concat(lawNum,\"&enfDate=\").concat(enfDate),payload).then(function(res){lawinfo(res.data);console.log(res.data);localStorage.Law=JSON.stringify(res.data.Law);localStorage.related=JSON.stringify(res.data.Related);_this.setState({isLoaded:true});}).then(function(){window.open(\"/law/\".concat(encodeURIComponent(name.replace(/[^가-힣^0-9]/g,'')),\"?lawNum=\").concat(lawNum,\"&enfDate=\").concat(format(new Date(enfDate),'yyyy-MM-dd')),'_blank');}).catch(function(err){if(err.res){console.log(err.res.data);console.log(err.res.status);console.log(err.res.headers);}else if(err.req){console.log(err.req);}else{console.log('Error',err.message);}console.log(err.config);});};_this.state={pageOfItems:[],isLoaded:false};_this.onChangePage=_this.onChangePage.bind(_assertThisInitialized(_this));return _this;}_createClass(SearchResult,[{key:\"onChangePage\",value:function onChangePage(pageOfItems){// 데이터들의 새로운 페이지로 스테이트 업데이트\nthis.setState({pageOfItems:pageOfItems});}},{key:\"render\",value:function render(){var _this2=this;if(this.props.lawlist.length===0){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"searchresult-container\"},/*#__PURE__*/React.createElement(SearchBar,null),/*#__PURE__*/React.createElement(\"div\",{className:\"searchresult-empty\"},\"\\uAC80\\uC0C9 \\uACB0\\uACFC\\uAC00 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\")));}return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"searchresult-container\"},/*#__PURE__*/React.createElement(SearchBar,null),/*#__PURE__*/React.createElement(\"div\",{className:\"searchresult-law-number\"},\"\\uCD1D \",this.props.lawlist.length,\" \\uAC74\\uC758 \\uACB0\\uACFC\"),/*#__PURE__*/React.createElement(\"div\",{className:\"searchresult-page-list text-center\"},this.state.pageOfItems.map(function(item,index){return/*#__PURE__*/React.createElement(\"div\",{to:\"/view\",target:\"_blank\",className:\"searchresult-page\",key:index,onClick:function onClick(){return _this2.handleClickSearch(item.name,item.number,item.enforcement_date);}},/*#__PURE__*/React.createElement(\"h3\",{className:\"searchresult-name\"},item.name),/*#__PURE__*/React.createElement(\"span\",{className:\"searchresult-type\"},item.type,\"\\xA0\"),/*#__PURE__*/React.createElement(\"span\",{className:\"searchresult-number\"},item.number,\"\\uD638\\xA0\"),/*#__PURE__*/React.createElement(\"span\",{className:\"searchresult-admendment\"},item.amendment_status,\"\\xA0\"),/*#__PURE__*/React.createElement(\"span\",{className:\"searchresult-ministry\"},item.ministry,\"\\xA0\"),/*#__PURE__*/React.createElement(\"span\",{className:\"searchresult-promulgation\"},\"\\uACF5\\uD3EC\\uC77C\\uC790 :\",' ',format(new Date(item.promulgation_date),'yyyy.MM.dd'),\"\\xA0\"),/*#__PURE__*/React.createElement(\"span\",{className:\"searchresult-enforcement\"},\"\\uC2DC\\uD589\\uC77C\\uC790 :\",' ',format(new Date(item.enforcement_date),'yyyy.MM.dd')));}),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Pagination,{items:this.props.lawlist,onChangePage:this.onChangePage})))));}}]);return SearchResult;}(React.Component);export default connect(function(state){return{lawlist:state.searchlist.lawlist,lawDetail:state.lawinfo.lawDetail};},function(dispatch){return{searchlist:function searchlist(data){return dispatch(_searchlist.searchlist(data));},lawinfo:function lawinfo(data){return dispatch(_lawinfo.lawinfo(data));}};})(withRouter(SearchResult));","map":{"version":3,"sources":["/Users/iden/Desktop/Projects/carillon_codestates/client/src/components/SearchResult.js"],"names":["React","SearchBar","connect","searchlist","Pagination","axios","withRouter","lawinfo","format","SearchResult","props","handleClickSearch","name","lawNum","enfDate","payload","post","encodeURIComponent","then","res","data","console","log","localStorage","Law","JSON","stringify","related","Related","setState","isLoaded","window","open","replace","Date","catch","err","status","headers","req","message","config","state","pageOfItems","onChangePage","bind","lawlist","length","map","item","index","number","enforcement_date","type","amendment_status","ministry","promulgation_date","Component","lawDetail","dispatch"],"mappings":"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","sourcesContent":["import React from 'react';\nimport SearchBar from './SearchBar';\nimport { connect } from 'react-redux';\nimport * as searchlist from '../modules/searchlist';\nimport Pagination from './Pagination';\n// import Pagination2 from './2Pagination2';\nimport axios from 'axios';\nimport { withRouter } from 'react-router-dom';\nimport * as lawinfo from '../modules/lawinfo';\nimport './SearchResult.css';\nimport { format } from 'date-fns';\n\nclass SearchResult extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      pageOfItems: [],\n      isLoaded: false,\n    };\n    this.onChangePage = this.onChangePage.bind(this);\n  }\n\n  onChangePage(pageOfItems) {\n    // 데이터들의 새로운 페이지로 스테이트 업데이트\n    this.setState({ pageOfItems: pageOfItems });\n  }\n  \n  handleClickSearch = (name, lawNum, enfDate) => {\n    const { lawinfo } = this.props;\n    const payload = { lawNum, enfDate };\n    axios\n      .post(\n        `http://13.125.112.243/law/${encodeURIComponent(\n          name\n        )}?lawNum=${lawNum}&enfDate=${enfDate}`,\n        payload\n      )\n      .then((res) => {\n        lawinfo(res.data);\n        console.log(res.data);\n        localStorage.Law = JSON.stringify(res.data.Law);\n        localStorage.related = JSON.stringify(res.data.Related);\n        this.setState({\n          isLoaded: true,\n        });\n      })\n      .then(() => {\n        window.open(\n          `/law/${encodeURIComponent(\n            name.replace(/[^가-힣^0-9]/g, '')\n          )}?lawNum=${lawNum}&enfDate=${format(\n            new Date(enfDate),\n            'yyyy-MM-dd'\n          )}`,\n          '_blank'\n        );\n      })\n      .catch(function (err) {\n        if (err.res) {\n          console.log(err.res.data);\n          console.log(err.res.status);\n          console.log(err.res.headers);\n        } else if (err.req) {\n          console.log(err.req);\n        } else {\n          console.log('Error', err.message);\n        }\n        console.log(err.config);\n      });\n  };\n  \n  render() {\n    if (this.props.lawlist.length === 0) {\n      return (\n        <div>\n          <div className='searchresult-container'>\n            <SearchBar />\n            <div className='searchresult-empty'>검색 결과가 없습니다.</div>\n          </div>\n        </div>\n      );\n    }\n    return (\n      <div>\n        <div className='searchresult-container'>\n          <SearchBar />\n          <div className='searchresult-law-number'>\n            총 {this.props.lawlist.length} 건의 결과\n          </div>\n          <div className='searchresult-page-list text-center'>\n            {this.state.pageOfItems.map((item, index) => (\n              <div\n                to='/view'\n                target='_blank'\n                className='searchresult-page'\n                key={index}\n                onClick={() =>\n                  this.handleClickSearch(\n                    item.name,\n                    item.number,\n                    item.enforcement_date\n                  )\n                }\n              >\n                <h3 className='searchresult-name'>{item.name}</h3>\n\n                <span className='searchresult-type'>{item.type}&nbsp;</span>\n                <span className='searchresult-number'>\n                  {item.number}호&nbsp;\n                </span>\n                <span className='searchresult-admendment'>\n                  {item.amendment_status}&nbsp;\n                </span>\n                <span className='searchresult-ministry'>\n                  {item.ministry}&nbsp;\n                </span>\n                <span className='searchresult-promulgation'>\n                  공포일자 :{' '}\n                  {format(new Date(item.promulgation_date), 'yyyy.MM.dd')}&nbsp;\n                </span>\n                <span className='searchresult-enforcement'>\n                  시행일자 :{' '}\n                  {format(new Date(item.enforcement_date), 'yyyy.MM.dd')}\n                </span>\n              </div>\n            ))}\n            <div>\n              <Pagination\n                items={this.props.lawlist}\n                onChangePage={this.onChangePage}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default connect(\n  (state) => ({\n    lawlist: state.searchlist.lawlist,\n    lawDetail: state.lawinfo.lawDetail,\n  }),\n  (dispatch) => ({\n    searchlist: (data) => dispatch(searchlist.searchlist(data)),\n    lawinfo: (data) => dispatch(lawinfo.lawinfo(data)),\n  })\n)(withRouter(SearchResult));\n"]},"metadata":{},"sourceType":"module"}