{"ast":null,"code":"import _slicedToArray from\"/Users/iden/Desktop/Projects/carillon_codestates/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import axios from'axios';import{connect}from'react-redux';import{withRouter}from'react-router-dom';import queryString from'query-string';import*as _Law from'../modules/Law';import*as _Related from'../modules/Related';import*as _Result from'../modules/Result';import SideInfo from'../components/SideInfo';import ArticleLink from'../components/ArticleLink';import ConvertToPDF from'../components/ConvertToPDF';import'./ViewPage.css';function ViewPage(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoaded=_useState2[0],setisLoaded=_useState2[1];var match=props.match;var _useState3=useState(match.params.key),_useState4=_slicedToArray(_useState3,1),name=_useState4[0];// 검색어 하이라이트\nvar changeStr=function changeStr(str,searchWord){var bracket=new Set(['<','>']);var isOn=false;var changeLaw='';var temp='';var length=searchWord.length;for(var i=0;i<str.length;i++){var keyCheck=str.slice(i,i+length);if(bracket.has(str[i])){isOn=!isOn;}if(!isOn&&keyCheck===searchWord){var tmp1=str.slice(0,i);var tmp2=str.slice(i+length,str.length);temp=\"\".concat(tmp1,\"thishashkey\").concat(tmp2);}}changeLaw=temp.replace(/thishashkey/g,\"<span class='searchWord-highlight'>\".concat(searchWord,\"</span>\"));return changeLaw;};// 요청 받은 쿼리에 따라 서버에 Post 요청\nuseEffect(function(){var Law=props.Law,Related=props.Related,Result=props.Result;var _queryString$parse=queryString.parse(props.location.search),lawNum=_queryString$parse.lawNum,enfDate=_queryString$parse.enfDate,searchWord=_queryString$parse.searchWord;var payload={lawNum:lawNum,enfDate:enfDate};var url=\"http://13.125.112.243/law/\".concat(encodeURIComponent(name),\"?lawNum=\").concat(lawNum,\"&enfDate=\").concat(enfDate);if(!lawNum){url=\"http://13.125.112.243/law/\".concat(name,\"?enfDate=\").concat(enfDate);}axios.post(url,payload).then(function(data){Related(data.data.Related);Law(data.data.Law);if(searchWord){Result(changeStr(data.data.Law.context,searchWord));}else{Result(data.data.Law.context);}setisLoaded(true);}).catch(function(err){if(err.res){console.log(err.res.data);console.log(err.res.status);console.log(err.res.headers);}else if(err.req){console.log(err.req);}else{console.log('Error',err.message);}console.log(err.config);});},[]);if(isLoaded===true){return/*#__PURE__*/React.createElement(\"div\",{className:\"viewpage-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"viewpage-sideinfo-container\"},/*#__PURE__*/React.createElement(SideInfo,null)),/*#__PURE__*/React.createElement(\"div\",{className:\"viewpage-articlelink-container\"},/*#__PURE__*/React.createElement(ArticleLink,null)),/*#__PURE__*/React.createElement(ConvertToPDF,null));}return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"loder-container\"},/*#__PURE__*/React.createElement(\"p\",{className:\"loader-message\"},\"Loading...\"),/*#__PURE__*/React.createElement(\"div\",{className:\"loader\"})));}export default connect(function(state){return{Law:state.Law.Law,Related:state.Related.Related,Result:state.Result.Result};},function(dispatch){return{Law:function Law(data){return dispatch(_Law.Law(data));},Related:function Related(data){return dispatch(_Related.Related(data));},Result:function Result(data){return dispatch(_Result.Result(data));}};})(withRouter(ViewPage));","map":{"version":3,"sources":["/Users/iden/Desktop/Projects/carillon_codestates/client/src/pages/ViewPage.js"],"names":["React","useState","useEffect","axios","connect","withRouter","queryString","Law","Related","Result","SideInfo","ArticleLink","ConvertToPDF","ViewPage","props","isLoaded","setisLoaded","match","params","key","name","changeStr","str","searchWord","bracket","Set","isOn","changeLaw","temp","length","i","keyCheck","slice","has","tmp1","tmp2","replace","parse","location","search","lawNum","enfDate","payload","url","encodeURIComponent","post","then","data","context","catch","err","res","console","log","status","headers","req","message","config","state","dispatch"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport queryString from 'query-string';\nimport * as Law from '../modules/Law';\nimport * as Related from '../modules/Related';\nimport * as Result from '../modules/Result';\nimport SideInfo from '../components/SideInfo';\nimport ArticleLink from '../components/ArticleLink';\nimport ConvertToPDF from '../components/ConvertToPDF';\nimport './ViewPage.css';\n\nfunction ViewPage(props) {\n  const [isLoaded, setisLoaded] = useState(false);\n  const { match } = props;\n  const [name] = useState(match.params.key);\n\n  // 검색어 하이라이트\n  const changeStr = (str, searchWord) => {\n    const bracket = new Set(['<', '>']);\n    let isOn = false;\n    let changeLaw = '';\n    let temp = '';\n\n    const { length } = searchWord;\n\n    for (let i = 0; i < str.length; i++) {\n      const keyCheck = str.slice(i, i + length);\n\n      if (bracket.has(str[i])) {\n        isOn = !isOn;\n      }\n      if (!isOn && keyCheck === searchWord) {\n        const tmp1 = str.slice(0, i);\n        const tmp2 = str.slice(i + length, str.length);\n        temp = `${tmp1}thishashkey${tmp2}`;\n      }\n    }\n\n    changeLaw = temp.replace(\n      /thishashkey/g,\n      `<span class='searchWord-highlight'>${searchWord}</span>`,\n    );\n    return changeLaw;\n  };\n\n  // 요청 받은 쿼리에 따라 서버에 Post 요청\n  useEffect(() => {\n    const { Law, Related, Result } = props;\n    const { lawNum, enfDate, searchWord } = queryString.parse(props.location.search);\n    const payload = { lawNum, enfDate };\n\n    let url = `http://13.125.112.243/law/${encodeURIComponent(\n      name,\n    )}?lawNum=${lawNum}&enfDate=${enfDate}`;\n    if (!lawNum) {\n      url = `http://13.125.112.243/law/${name}?enfDate=${enfDate}`;\n    }\n\n    axios\n      .post(url, payload)\n      .then((data) => {\n        Related(data.data.Related);\n        Law(data.data.Law);\n        if (searchWord) {\n          Result(changeStr(data.data.Law.context, searchWord));\n        } else {\n          Result(data.data.Law.context);\n        }\n        setisLoaded(true);\n      })\n      .catch((err) => {\n        if (err.res) {\n          console.log(err.res.data);\n          console.log(err.res.status);\n          console.log(err.res.headers);\n        } else if (err.req) {\n          console.log(err.req);\n        } else {\n          console.log('Error', err.message);\n        }\n        console.log(err.config);\n      });\n  }, []);\n\n  if (isLoaded === true) {\n    return (\n      <div className='viewpage-container'>\n        <div className='viewpage-sideinfo-container'>\n          <SideInfo />\n        </div>\n        <div className='viewpage-articlelink-container'>\n          <ArticleLink />\n        </div>\n        <ConvertToPDF />\n      </div>\n    );\n  }\n  return (\n    <div>\n      <div className='loder-container'>\n        <p className='loader-message'>Loading...</p>\n        <div className='loader' />\n      </div>\n    </div>\n  );\n}\n\nexport default connect(\n  (state) => ({\n    Law: state.Law.Law,\n    Related: state.Related.Related,\n    Result: state.Result.Result,\n  }),\n  (dispatch) => ({\n    Law: (data) => dispatch(Law.Law(data)),\n    Related: (data) => dispatch(Related.Related(data)),\n    Result: (data) => dispatch(Result.Result(data)),\n  }),\n)(withRouter(ViewPage));\n"]},"metadata":{},"sourceType":"module"}