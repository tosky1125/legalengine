{"ast":null,"code":"import _slicedToArray from\"/Users/iden/Desktop/Projects/carillon_codestates/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{useForm}from'react-hook-form';import axios from'axios';import'./SearchBar.css';import{connect}from'react-redux';import*as _searchlist from'../modules/searchlist';import*as _searchword from'../modules/searchword';import*as _searchdate from'../modules/searchdate';import{withRouter}from'react-router-dom';import{format}from'date-fns';function SearchBar(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),searchWord=_useState2[0],setSearchWord=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoaded=_useState4[0],setisLoaded=_useState4[1];var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.errors;var today=format(new Date(),'yyyy-MM-dd');var _useState5=useState(today),_useState6=_slicedToArray(_useState5,2),searchDate=_useState6[0],setSearchDate=_useState6[1];// searchdate(searchDate)\nvar handleChangeTerm=function handleChangeTerm(e){setSearchWord(e.target.value);console.log(e.target.value);};var handleChangeDate=function handleChangeDate(e){setSearchDate(e.target.value);console.log(e.target.value);};var handleSearch=function handleSearch(){var payload={searchWord:searchWord,date:searchDate};var searchlist=props.searchlist,history=props.history,searchword=props.searchword,searchdate=props.searchdate;// localStorage.searchWord = JSON.stringify(searchWord);\n// localStorage.searchDate = JSON.stringify(searchDate);\nsearchword(searchWord);searchdate(searchDate);axios.post('http://13.125.112.243/search',payload).then(function(res){searchlist(res.data);setisLoaded(true);console.log(res.data);}).then(function(){history.push('/search');}).catch(function(err){if(err.res){console.log(err.res.data);console.log(err.res.status);console.log(err.res.headers);}else if(err.req){console.log(err.req);}else{console.log('Error',err.message);}console.log(err.config);});};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"searchbar-container\"},/*#__PURE__*/React.createElement(\"form\",{className:\"searchbar-form\",autoComplete:\"off\",onSubmit:handleSubmit(handleSearch)},/*#__PURE__*/React.createElement(\"div\",{className:\"searchbar-flex\"},/*#__PURE__*/React.createElement(\"label\",{className:\"searchbar-Term\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"setSearchWord\",ref:register({required:true,minLength:2,pattern:/^[ㄱ-ㅎ|가-힣|a-z|A-Z|  0-9|*+$]/}),placeholder:\"\\uBC95\\uB839\\uC744 \\uAC80\\uC0C9\\uD574\\uBCF4\\uC138\\uC694.\",onChange:handleChangeTerm})),/*#__PURE__*/React.createElement(\"label\",{className:\"searchbar-date\"},/*#__PURE__*/React.createElement(\"input\",{type:\"date\",name:\"date\",value:searchDate,onChange:handleChangeDate})),/*#__PURE__*/React.createElement(\"button\",{className:\"searchbar-btn\",type:\"submit\"},\"\\uAC80\\uC0C9\")),/*#__PURE__*/React.createElement(\"div\",{className:\"valid-error\"},errors.setSearchWord&&'문자&숫자 2글자 이상 입력 가능합니다.'))));}export default connect(function(state){return{seachlist:state.searchlist.seachlist,searchword:state.searchword.searchword,searchdate:state.searchdate.searchdate};},function(dispatch){return{searchlist:function searchlist(data){return dispatch(_searchlist.searchlist(data));},searchword:function searchword(data){return dispatch(_searchword.searchword(data));},searchdate:function searchdate(data){return dispatch(_searchdate.seachdate(data));}};})(withRouter(SearchBar));","map":{"version":3,"sources":["/Users/iden/Desktop/Projects/carillon_codestates/client/src/components/SearchBar.js"],"names":["React","useState","useForm","axios","connect","searchlist","searchword","searchdate","withRouter","format","SearchBar","props","searchWord","setSearchWord","isLoaded","setisLoaded","register","handleSubmit","errors","today","Date","searchDate","setSearchDate","handleChangeTerm","e","target","value","console","log","handleChangeDate","handleSearch","payload","date","history","post","then","res","data","push","catch","err","status","headers","req","message","config","required","minLength","pattern","state","seachlist","dispatch","seachdate"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport axios from 'axios';\nimport './SearchBar.css';\nimport { connect } from 'react-redux';\nimport * as searchlist from '../modules/searchlist';\nimport * as searchword from '../modules/searchword';\nimport * as searchdate from '../modules/searchdate';\nimport { withRouter } from 'react-router-dom';\nimport { format } from 'date-fns';\n\nfunction SearchBar(props) {\n  const [searchWord, setSearchWord] = useState('');\n  const [isLoaded, setisLoaded] = useState(false);\n  const { register, handleSubmit, errors } = useForm();\n\n  const today = format(new Date(), 'yyyy-MM-dd');\n  const [searchDate, setSearchDate] = useState(today);\n  // searchdate(searchDate)\n\n  const handleChangeTerm = (e) => {\n    setSearchWord(e.target.value);\n    console.log(e.target.value);\n  };\n\n  const handleChangeDate = (e) => {\n    setSearchDate(e.target.value);\n    console.log(e.target.value);\n  };\n\n  const handleSearch = () => {\n    const payload = { searchWord: searchWord, date: searchDate };\n    const { searchlist, history, searchword, searchdate } = props;\n    // localStorage.searchWord = JSON.stringify(searchWord);\n    // localStorage.searchDate = JSON.stringify(searchDate);\n    searchword(searchWord);\n    searchdate(searchDate);\n\n    axios\n      .post('http://13.125.112.243/search', payload)\n      .then((res) => {\n        searchlist(res.data);\n        setisLoaded(true);\n        console.log(res.data);\n      })\n      .then(() => {\n        history.push('/search');\n      })\n      .catch((err) => {\n        if (err.res) {\n          console.log(err.res.data);\n          console.log(err.res.status);\n          console.log(err.res.headers);\n        } else if (err.req) {\n          console.log(err.req);\n        } else {\n          console.log('Error', err.message);\n        }\n        console.log(err.config);\n      });\n  };\n\n  return (\n    <div>\n      <div className='searchbar-container'>\n        <form\n          className='searchbar-form'\n          autoComplete='off'\n          onSubmit={handleSubmit(handleSearch)}\n        >\n          <div className='searchbar-flex'>\n            <label className='searchbar-Term'>\n              <input\n                type='text'\n                name='setSearchWord'\n                ref={register({\n                  required: true,\n                  minLength: 2,\n                  pattern: /^[ㄱ-ㅎ|가-힣|a-z|A-Z|  0-9|*+$]/,\n                })}\n                placeholder='법령을 검색해보세요.'\n                onChange={handleChangeTerm}\n              />\n            </label>\n            <label className='searchbar-date'>\n              <input\n                type='date'\n                name='date'\n                value={searchDate}\n                onChange={handleChangeDate}\n              />\n            </label>\n            <button className='searchbar-btn' type='submit'>\n              검색\n            </button>\n          </div>\n          <div className='valid-error'>\n            {errors.setSearchWord && '문자&숫자 2글자 이상 입력 가능합니다.'}\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n\nexport default connect(\n  (state) => ({\n    seachlist: state.searchlist.seachlist,\n    searchword: state.searchword.searchword,\n    searchdate: state.searchdate.searchdate,\n  }),\n  (dispatch) => ({\n    searchlist: (data) => dispatch(searchlist.searchlist(data)),\n    searchword: (data) => dispatch(searchword.searchword(data)),\n    searchdate: (data) => dispatch(searchdate.seachdate(data)),\n  })\n)(withRouter(SearchBar));\n"]},"metadata":{},"sourceType":"module"}