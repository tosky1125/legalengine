{"ast":null,"code":"import _slicedToArray from\"/Users/iden/Desktop/Projects/carillon_codestates/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import axios from'axios';import{connect}from'react-redux';import{withRouter}from'react-router-dom';import*as _Law from'../modules/Law';import*as _Related from'../modules/Related';import*as _Result from'../modules/Result';import SideInfo from'./SideInfo';import ArticleLink from'./ArticleLink';import'./ViewPage.css';import ConvertToPDF from'../components/ConvertToPDF';import queryString from'query-string';function ViewPage(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoaded=_useState2[0],setisLoaded=_useState2[1];var _useState3=useState(props.match.params.key),_useState4=_slicedToArray(_useState3,1),name=_useState4[0];var changeStr=function changeStr(str,searchword){var bracket=new Set(['<','>']);var isOn=false;var length=searchword.length;for(var i=0;i<str.length;i++){var keyCheck=str.slice(i,i+length);if(bracket.has(str[i])){isOn=!isOn;}if(!isOn&&keyCheck===searchword){var tmp1=str.slice(0,i);var tmp2=str.slice(i+length,str.length);str=\"\".concat(tmp1,\"thishashkey\").concat(tmp2);}}str=str.replace(/thishashkey/g,\"<span class='searchword-highlight'>\".concat(searchword,\"</span>\"));return str;};useEffect(function(){var Law=props.Law,Related=props.Related,Result=props.Result;var _queryString$parse=queryString.parse(props.location.search),lawNum=_queryString$parse.lawNum,enfDate=_queryString$parse.enfDate,searchword=_queryString$parse.searchword;var payload={lawNum:lawNum,enfDate:enfDate};var url=\"http://13.125.112.243/law/\".concat(encodeURIComponent(name),\"?lawNum=\").concat(lawNum,\"&enfDate=\").concat(enfDate);if(!lawNum){url=\"http://13.125.112.243/law/\".concat(name,\"?enfDate=\").concat(enfDate);}axios.post(url,payload).then(function(data){Related(data.data.Related);Law(data.data.Law);Result(changeStr(data.data.Law.context,searchword));setisLoaded(true);}).catch(function(err){if(err.res){console.log(err.res.data);console.log(err.res.status);console.log(err.res.headers);}else if(err.req){console.log(err.req);}else{console.log('Error',err.message);}console.log(err.config);});},[]);if(isLoaded===true){return/*#__PURE__*/React.createElement(\"div\",{className:\"viewpage-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"viewpage-sideinfo-container\"},/*#__PURE__*/React.createElement(SideInfo,null)),/*#__PURE__*/React.createElement(\"div\",{className:\"viewpage-articlelink-container\"},/*#__PURE__*/React.createElement(ArticleLink,null)),/*#__PURE__*/React.createElement(ConvertToPDF,null));}else{return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"loder-container\"},/*#__PURE__*/React.createElement(\"p\",{className:\"loader-message\"},\"Loading...\"),/*#__PURE__*/React.createElement(\"div\",{className:\"loader\"})));}}export default connect(function(state){return{Law:state.Law.Law,Related:state.Related.Related,Result:state.Result.Result};},function(dispatch){return{Law:function Law(data){return dispatch(_Law.Law(data));},Related:function Related(data){return dispatch(_Related.Related(data));},Result:function Result(data){return dispatch(_Result.Result(data));}};})(withRouter(ViewPage));","map":{"version":3,"sources":["/Users/iden/Desktop/Projects/carillon_codestates/client/src/components/ViewPage.js"],"names":["React","useState","useEffect","axios","connect","withRouter","Law","Related","Result","SideInfo","ArticleLink","ConvertToPDF","queryString","ViewPage","props","isLoaded","setisLoaded","match","params","key","name","changeStr","str","searchword","bracket","Set","isOn","length","i","keyCheck","slice","has","tmp1","tmp2","replace","parse","location","search","lawNum","enfDate","payload","url","encodeURIComponent","post","then","data","context","catch","err","res","console","log","status","headers","req","message","config","state","dispatch"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport * as Law from '../modules/Law';\nimport * as Related from '../modules/Related';\nimport * as Result from '../modules/Result';\nimport SideInfo from './SideInfo';\nimport ArticleLink from './ArticleLink';\nimport './ViewPage.css';\nimport ConvertToPDF from '../components/ConvertToPDF';\nimport queryString from 'query-string';\n\nfunction ViewPage(props) {\n  const [isLoaded, setisLoaded] = useState(false);\n  const [name] = useState(props.match.params.key);\n\n  const changeStr = (str, searchword) => {\n    const bracket = new Set(['<', '>']);\n    let isOn = false;\n    const { length } = searchword;\n    for (let i = 0; i < str.length; i++) {\n      const keyCheck = str.slice(i, i + length);\n      if (bracket.has(str[i])) {\n        isOn = !isOn;\n      }\n      if (!isOn && keyCheck === searchword) {\n        const tmp1 = str.slice(0, i);\n        const tmp2 = str.slice(i + length, str.length);\n        str = `${tmp1}thishashkey${tmp2}`;\n      }\n    }\n    str = str.replace(\n      /thishashkey/g,\n      `<span class='searchword-highlight'>${searchword}</span>`\n    );\n    return str;\n  };\n\n  useEffect(() => {\n    const { Law, Related, Result } = props;\n    const { lawNum, enfDate, searchword } = queryString.parse(\n      props.location.search\n    );\n\n    const payload = { lawNum, enfDate };\n\n    let url = `http://13.125.112.243/law/${encodeURIComponent(\n      name\n    )}?lawNum=${lawNum}&enfDate=${enfDate}`;\n\n    if (!lawNum) {\n      url = `http://13.125.112.243/law/${name}?enfDate=${enfDate}`;\n    }\n    axios\n      .post(url, payload)\n      .then((data) => {\n        Related(data.data.Related);\n        Law(data.data.Law);\n        Result(changeStr(data.data.Law.context, searchword));\n        setisLoaded(true);\n      })\n      .catch(function (err) {\n        if (err.res) {\n          console.log(err.res.data);\n          console.log(err.res.status);\n          console.log(err.res.headers);\n        } else if (err.req) {\n          console.log(err.req);\n        } else {\n          console.log('Error', err.message);\n        }\n        console.log(err.config);\n      });\n  }, []);\n\n  if (isLoaded === true) {\n    return (\n      <div className='viewpage-container'>\n        <div className='viewpage-sideinfo-container'>\n          <SideInfo />\n        </div>\n        <div className='viewpage-articlelink-container'>\n          <ArticleLink />\n        </div>\n        <ConvertToPDF />\n      </div>\n    );\n  } else {\n    return (\n      <div>\n        <div className='loder-container'>\n          <p className='loader-message'>Loading...</p>\n          <div className='loader'></div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default connect(\n  (state) => ({\n    Law: state.Law.Law,\n    Related: state.Related.Related,\n    Result: state.Result.Result,\n  }),\n  (dispatch) => ({\n    Law: (data) => dispatch(Law.Law(data)),\n    Related: (data) => dispatch(Related.Related(data)),\n    Result: (data) => dispatch(Result.Result(data)),\n  })\n)(withRouter(ViewPage));\n"]},"metadata":{},"sourceType":"module"}